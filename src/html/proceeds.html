<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>收银页面</title>
    <base href="../" />

    <link rel="stylesheet" type="text/css" href="css/base.css" />
    <link rel="stylesheet" type="text/css" href="lib/bootstrap/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/TB.css" />
    <link rel="stylesheet" type="text/css" href="css/proceeds.css" />

    <script type="text/javascript" src="lib/socket.io.js"></script>
    <script src="js/eE.js"></script>
    <script src="lib/jquery-3.2.1.js"></script>
    <script type="text/javascript" src="lib/jquery-ui-1.12.1/jquery-ui.js"></script>
    <script src="lib/common.js"></script>
    <script src="lib/require.js" data-main="js/proceeds"></script>
</head>
<body>
    <div id="Header"></div>
    <div id="Lnav"></div>
    <div id='proceeds'>
        <ol class="breadcrumb">
            <li><i class="fa fa-home"></i><a href="index.html">Home</a> ></li>
            <li><i class="icon_document_alt"></i>收银 </li>
            <li class="ip">商品条码：<input type="text" value="123456"/></li>
        </ol>
        <table class="table table-bordered">
                <thead>
                  <tr>
                    <th>序号</th>
                    <th>商品编码</th>
                    <th>商品条码</th>
                    <th>商品名称</th>
                    <th>型号规格</th>
                    <th>厂家产地</th>
                    <th>质量等级</th>
                    <th>单位</th>
                    <th>数量</th>
                    <th>原价</th>
                    <th>折扣（%）</th>
                    <th>单价</th>
                    <th>金额</th>
                    <th>删除</th>
                  </tr>
                </thead>
                <tbody>
                </tbody>
        </table>

        <div class="op">
            <div class="money">
                <span>总计：</span><input type="text" class="form-control" id="total"/>
                <span>调减：</span><input type="text" class="form-control" id="cut" value="0"/>
                <span>应收：</span><input type="text" class="form-control" id="receipt"/>
            </div>
            <div class="front">
                <span>前单应收：</span><input type="text" class="form-control"/>
                <span>前单收款：</span><input type="text" class="form-control"/>
                <span>前单找零：</span><input type="text" class="form-control"/>
            </div>
            <div class="click">
                <button id="butLD">落单(Del)</button>
                <button id="but">挂单(G)</button>
                <button id="but">提单(T)</button>
                <button id="butprint">打印(D)</button>
                <button id="butOver" >结算(Space)</button>
                <button id="but">退出(Esc)</button>
            </div>
        </div>
        <!-- ------弹窗----- -->
        <div class="way" >
            <h2>付款方式</h2>
            <button type="button" class="btn btn-default btn-lg btn-block weixin">微信支付
            </button>
            <button type="button" class="btn btn-default btn-lg btn-block weixin">支付宝支付
            </button>
            <button type="button" class="btn btn-default btn-lg btn-block">
            现金交付
            <!-- <dl>
                <dt>
                    <dd>应收：<span></span></dd>
                    <dd>收款：<span></span></dd>
                    <dd>找零：<span></span></dd>
                </dt>
            </dl> -->
            </button>
        </div>
        <!-- 二维码 -->
        <div id="eE">
            <div id="qrcode">
            </div>
            <div id="queren">
                <h2>付款完成</h2>
            </div>
            <button type="button" class="btn btn-default btn-lg btn-block " id="esc_zhifu">退出
            </button>
        </div>
        <div class="zhezhao"></div>

        <script type="text/javascript">
            var socket = io("ws://localhost:8818");
            
            socket.on('ok', function(data){

                if(data == 'true'){

                    $('#qrcode').fadeToggle(900,function(){
                        $('#queren').fadeToggle(900);
                    });
                    $('#esc_zhifu').fadeOut();
                    setTimeout(function(){
                        $('#eE').fadeToggle(900,function(){
                            $('.zhezhao').css("display","none");
                            $('#queren').css("display","none");
                            $('#qrcode').fadeToggle()
                            $('#esc_zhifu').fadeToggle()
                            $('#qrcode').children().remove();
                        });
                        
                    },3000)
                }
                console.log(data)
                })

            $('#butOver').click(function(){
                var qrcode = new QRCode(document.getElementById("qrcode"), {
                    width : 177,//设置宽高
                    height : 177
                });
                qrcode.makeCode("http:///10.3.131.29/csx/first_project/src/html/fukuan.html?"+$('#receipt').val());
            })
            $( ".way" ).draggable();
        </script>
    </div>
</body>
</html>
